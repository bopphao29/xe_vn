<div style="background-color: #f7f7f7;">
    <div nz-row>
        <div nz-col nzSpan="14">
            <button (click)="onBack($event)" class="flex" style="margin-top: 10px;">
                <span class="mx-2 " style="margin-top: 3px ; cursor: pointer;">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3.825 9L9.425 14.6L8 16L0 8L8 0L9.425 1.4L3.825 7H16V9H3.825Z" fill="#274EA1" />
                    </svg>
                </span>
                <span>
                    Quay lại
                    
                </span>
            </button>
            </div>

    </div>
    <div nz-row class="p-2">
        <div nz-col nzSpan="24" class="p-2" style="background-color: rgba(252, 252, 252, 1); border-radius: 12px;">
            <div nz-row class="" style=" margin-top: 8px;">
                <div nz-col nzSpan="8" style="width: calc(50% - 16px); padding-right: 8px;">
                    <table class="custom-table">
                        <tbody>
                            <tr>
                                <td class="co">BKS</td>
                                <td class="col-2">{{ dataSummaryByRegisterNo?.registerNo || '' }}</td>
                            </tr>
                            <tr>
                                <td class="col-1">Lái xe</td>
                                <td class="col-2">{{ dataSummaryByRegisterNo?.driver || '' }}</td>
                            </tr>
                            <tr>
                                <td class="col-1">Loại xe</td>
                                <td class="col-2">{{ dataSummaryByRegisterNo?.vehicleType || '' }}</td>
                            </tr>
                            <tr>
                                <td class="col-1">Năm sản xuất</td>
                                <td class="col-2">
                                    {{ dataSummaryByRegisterNo?.manufacturerYear || '' }}
                                </td>

                            </tr>
                            <tr>
                                <td class="col-1">Số Km hiện tại</td>
                                <td class="col-2">{{ dataSummaryByRegisterNo?.odometer || '' }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div nz-col nzSpan="8" style="width: calc(50% - 16px); padding-left: 8px;">
                    <table class="custom-table">
                        <tbody>
                            <tr>
                                <td class="col-1">Tổng số lượt BDSC</td>
                                <td class="col-2">{{ dataSummaryByRegisterNo?.numberOfMaintenance }}</td>
                            </tr>
                            <tr>
                                <td class="col-1">Tổng tình trạng xe</td>
                                <td class="col-2">{{ dataSummaryByRegisterNo?.vehicleStatuses }}</td>
                            </tr>
                            <tr>
                                <td class="col-1">Tổng thời gian SC</td>
                                <td class="col-2">{{  dataSummaryByRegisterNo?.hours }}</td>
                            </tr>
                            <tr>
                                <td class="col-1">Tổng công việc SC</td>
                                <td class="col-2">{{dataSummaryByRegisterNo?.worksPerformed}}</td>
                            </tr>
                            <tr>
                                <td class="col-1">Tổng vật tư thay thế</td>
                                <td class="col-2">{{dataSummaryByRegisterNo?.replacementSupplies}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div style="margin-top: 16px;"></div>
            <span class="label_setup mx-2">Chi tiết yêu cầu bảo dưỡng sửa chữa</span>

            <div nz-row style="margin-top: 20px;" class="p-4">
                <div nz-col nzSpan="22">
                    <table class="custom-table-list" style="background-color: #FCFCFC; text-align: center; width: 100%; border-collapse: collapse;">
                        <thead>
                          <tr style="background-color: #f4f4f4;">
                            <th class="list-col">Tháng</th>
                            <th class="list-col">Số lần BDSC</th>
                            <th class="list-col">Ngày BDSC</th>
                            <th class="list-col">Tình trạng xe</th>
                            <th class="list-col">Thời gian SC (giờ)</th>
                            <th class="list-col">Công việc SC</th>
                            <th class="list-col">Tác vụ</th>
                          </tr>
                        </thead>
                        <tbody>
                            <!-- Lặp qua từng nhóm (theo tháng) -->
                            <ng-container *ngFor="let group of showEmpolyeeNoData(); let groupIndex = index">
                              <!-- Lặp qua từng chi tiết trong nhóm -->
                              <ng-container *ngFor="let detail of group.lstDetails; let i = index">
                                <tr>
                                  <!-- Cột "Tháng" (gộp dòng) -->
                                  <td *ngIf="i === 0" class="list-col" [attr.rowspan]="group.lstDetails.length">
                                    {{ group.month }}
                                  </td>
                        
                                  <!-- Cột "Số lần BDSC" (gộp dòng) -->
                                  <td *ngIf="i === 0" class="list-col" [attr.rowspan]="group.lstDetails.length">
                                    {{ group.numberOfMaintenance }}
                                  </td>
                        
                                  <!-- Cột chi tiết -->
                                  <td class="list-col">{{ detail.date || '-' }}</td>
                                  <td class="list-col">
                                    <span *ngIf="detail.vehicleStatuses === 0">Hoạt động</span>
                                    <span *ngIf="detail.vehicleStatuses === 1">Không hoạt động</span>
                                    <span *ngIf="detail.vehicleStatuses === null">-</span>
                                  </td>
                                  <td class="list-col">{{ detail.hours || '-' }}</td>
                                  <td class="list-col">{{ detail.worksPerformed || '-' }}</td>
                                  <td class="list-col">
                                    <a *ngIf="detail.id" (click)="routerDetail(detail?.id)" class="button_show_detail">
                                      Xem chi tiết
                                    </a>
                                    <span *ngIf="!detail.id">-</span>
                                  </td>
                                </tr>
                              </ng-container>
                            </ng-container>
                          </tbody>
                      </table>
                      
                </div>
            </div>
            
            
            <div style="display: flex; justify-content: center;">
                <nz-pagination
              [(nzPageIndex)]="pageIndex"
              [nzTotal]="total"
              [nzPageSize]="pageSize"
              (nzPageIndexChange)="onPageChange($event, regisNo)"
              class="custom-pagination">
            </nz-pagination>
            </div>
        </div>
        
    </div>

</div>