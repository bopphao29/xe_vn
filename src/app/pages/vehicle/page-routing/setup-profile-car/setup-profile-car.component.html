<div >
  <form nz-form nzGutter="16" class="w-full" class="p-4 pt-0" (ngSubmit)="createVehicle()" nzLayout="vertical" [formGroup]="form" style="background-color: #f3f3f3;">
    <div class="form-container">
      <div class="input-wrapper p-0">
        <div class="">
          <span class="required-star" >*</span><label class="label-form">{{'vehicle.vehicleType' | translate}}</label>
          <nz-select nzPlaceHolder="Chọn loại xe" formControlName="vehicleTypeId" style="width: 100%">
            <nz-option *ngFor="let data of listVehicle" [nzValue]="data.id" [nzLabel]="data.name"></nz-option>
          </nz-select>
          <div class="error-container">
            <div *ngIf="form.get('vehicleTypeId')?.invalid && (form.get('vehicleTypeId')?.dirty || form.get('vehicleTypeId')?.touched)">
                <span class="validate_input" *ngIf="form.get('vehicleTypeId')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
            </div>
        </div>
        </div>
      </div>
    </div>
    <div class="p-2" style="padding-left:0px !important;">
    <span style="color: rgba(37, 44, 50, 1); font-weight: 500; font-size: 16px; line-height: 18.75px;">{{'vehicle.profile_vehicle' | translate}}</span>

    </div>
  
    <div style="background-color: #fff; border-radius: 5px;">
      <div class="p-4 pb-0 form-container">
        <div class="input-wrapper">
          <div class="">
            <span class="required-star" >*</span><label class="label-form" for="" >{{'vehicle.vehicleStatus' | translate}}</label>
            <nz-select nzPlaceHolder="Chọn" class="nzSelect"  formControlName="isNew">
              <nz-option nzValue="0" nzLabel="Xe cũ"></nz-option>
              <nz-option nzValue="1" nzLabel="Xe mới"></nz-option>
            </nz-select>
            <div class="error-container">
                <div *ngIf="form.get('isNew')?.invalid && (form.get('isNew')?.dirty) || form.get('isNew')?.touched">
                    <span class="validate_input" *ngIf="form.get('isNew')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                </div>
            </div>
        </div>
        </div>
  
        <div class="input-wrapper">
          <div class="">
              <span class="required-star" >*</span><label class="label-form" for="" >{{'vehicle.registerNo' | translate}}</label>
              <input class="input-form"  placeholder="30E-8888" type="text" formControlName="registerNo" >
              <div class="error-container">
                  <div *ngIf="form.get('registerNo')?.invalid && (form.get('registerNo')?.dirty || form.get('registerNo')?.touched)">
                      <span class="validate_input" *ngIf="form.get('registerNo')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                  </div>
              </div>
          </div>
  
        </div>
  
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" for="" >{{'vehicle.frameNumber' | translate}}</label>
              <input class="input-form" (input)="validateNumber($event)" placeholder="Nhập" maxlength="17" type="text" formControlName="frameNumber">
              
          </div>
  
        </div>
  
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" for="" >{{'vehicle.machineNumber' | translate}}</label>
              <input class="input-form" formControlName="machineNumber" (input)="validateNumber($event)" maxlength="17" placeholder="Nhập" type="text" >
              
          </div>
  
        </div>
  
        <div class="input-wrapper">
          <div class="">
              <span class="required-star">*</span><label class="label-form" for="" >{{'vehicle.manufactureYear' | translate}}</label>
              <input class="input-form" formControlName="manufactureYear" maxlength="4" (input)="validateNumber($event)"  placeholder="2000" type="text" >
              <div class="error-container">
                  <div *ngIf="form.get('manufactureYear')?.invalid && (form.get('manufactureYear')?.dirty || form.get('manufactureYear')?.touched)">
                      <span class="validate_input" *ngIf="form.get('manufactureYear')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                        <span class="instruct" *ngIf="form.get('manufactureYear')?.errors?.['max']">{{ ('required.manufactureYearMax' | translate)+maxYear }}</span>
                        <span class="instruct" *ngIf="form.get('manufactureYear')?.errors?.['min']">{{ ('required.manufactureYearMin' | translate) + minYear }}</span>
                  </div>
              </div>
          </div>
  
        </div>
  
        <div class="input-wrapper">
          <div class="">
              <span class="required-star" >*</span><label class="label-form" for="" >{{'vehicle.manufacturer' | translate}}</label>
              <input class="input-form" formControlName="manufacturer" (blur)="validateText($event)"   placeholder="Nhập" type="text" >
              <div class="error-container">
                  <div *ngIf="form.get('manufacturer')?.invalid && (form.get('manufacturer')?.dirty || form.get('manufacturer')?.touched)">
                      <span class="validate_input" *ngIf="form.get('manufacturer')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                  </div>
              </div>
          </div>
  
        </div>

  
        <div class="input-wrapper">
          <div class="">
              <span class="required-star" >*</span><label class="label-form" for="" >{{'vehicle.type_vehicle' | translate}}</label>
              <nz-select nzPlaceHolder="Chọn" formControlName="vehicleModelId" style="width: 100%">
                <nz-option *ngFor="let data of listVehicleModel" [nzValue]="data.id" [nzLabel]="data.name"></nz-option>
                <!-- <nz-option nzValue="solati" nzLabel="Solati"></nz-option> -->
              </nz-select>
              <div class="error-container">
                  <div *ngIf="form.get('vehicleModelId')?.invalid && (form.get('vehicleModelId')?.dirty || form.get('vehicleModelId')?.touched)">
                      <span class="validate_input" *ngIf="form.get('vehicleModelId')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                  </div>
              </div>
          </div>
  
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" for="" >
                <span class="required-star" >*</span>{{ labelTruck == true ? ('vehicle.payload' | translate) : ('vehicle.capacity' | translate) }} 
                <span style="color: rgba(239, 68, 68, 1);font-style: italic; font-weight: 400; font-size: 12px; line-height: 14.06px;"> {{'vehicle.noDriver' | translate}}</span>
              </label>
              <input class="input-form"  placeholder="Nhập" type="text" (input)="validateNumber($event)" formControlName="capacity" >
              <div class="error-container">
                  <div *ngIf="form.get('capacity')?.invalid && (form.get('capacity')?.dirty || form.get('capacity')?.touched)">
                      <span class="validate_input" *ngIf="form.get('capacity')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                  </div>
              </div>
          </div>
  
        </div>
  
        <div nz-col class="input-wrapper">
          <div class="">
            <label class="label-form">{{'vehicle.image_vehicle' | translate}}</label>
            <div class="custom-upload"  style="border: 1px solid #d9d9d9; border-radius: 5px; height: 48px !important">
                <input nz-input placeholder="Chọn" formControlName="image" readonly class="upload-input" style="border: none; outline: none; flex: 1; width: 100%; border-radius: 5px;"
                  [value]="fileCompressed.file.length > 0 ? fileCompressed.file[0].name : ''"  />
                <button nz-button nzType="default" nzShape="circle" class="upload-button" type="button"
                  (click)="isShowModalUploadfile = true" style="border: none; background: transparent;">
                  <i nz-icon nzType="paper-clip"></i>
                </button>
              </div>
              
          </div>
        </div>
  
        <div class="input-wrapper">
          <div class="">
            <label class="label-form" for="" >{{'vehicle.intendedUse' | translate}}</label>
            <nz-select nzPlaceHolder="Chọn" class="nzSelect" formControlName="intendedUse"  >
              <nz-option nzValue="1" nzLabel="Xe tuyến"></nz-option>
              <nz-option nzValue="1" nzLabel="Xe trung chuyển"></nz-option>

                <!-- <nz-option *ngFor="let gender of listGender" [nzValue]="gender.id" [nzLabel]="gender.value"></nz-option> -->
            </nz-select>
            <!-- <div class="error-container">
                <div *ngIf="form.get('intendedUse')?.invalid && (form.get('intendedUse')?.dirty) || form.get('intendedUse')?.touched">
                    <span class="validate_input" *ngIf="form.get('intendedUse')?.hasError('required')">{{'required.intendedUse' | translate}}</span>
                </div>
            </div> -->
        </div>
        </div>
  
        <div class="input-wrapper">
          <div class="">
            <span class="required-star" >*</span><label class="label-form" for="" >{{'vehicle.route' | translate}}</label>
            <nz-select nzPlaceHolder="Chọn" formControlName="routeId"  class="nzSelect" >
              <nz-option *ngFor="let data of listRoute" [nzValue]="data.id" [nzLabel]="data.name"></nz-option>
                <!-- <nz-option *ngFor="let gender of listGender" [nzValue]="gender.id" [nzLabel]="gender.value"></nz-option> -->
            </nz-select>
            <div class="error-container">
                <div *ngIf="form.get('routeId')?.invalid && (form.get('routeId')?.dirty) || form.get('routeId')?.touched">
                    <span class="validate_input" *ngIf="form.get('routeId')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                </div>
            </div>
        </div>
        </div>
  
        <div class="input-wrapper">
          <div class="">
              <span class="required-star" >*</span><label class="label-form" for="" >{{'vehicle.odometer' | translate}}</label>
              <input class="input-form" formControlName="odometer" (input)="validateNumber($event)" placeholder="KM" type="text" >
              <div class="error-container">
                  <div *ngIf="form.get('odometer')?.invalid && (form.get('odometer')?.dirty || form.get('odometer')?.touched)">
                      <span class="validate_input" *ngIf="form.get('odometer')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                  </div>
              </div>
          </div>
  
        </div>
  
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.firstStartDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" formControlName="firstStartDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('firstStartDate')?.invalid && (form.get('firstStartDate')?.dirty) || form.get('firstStartDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('firstStartDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>

        <div class="input-wrapper"  *ngIf="is_New == '0' || is_New == 0">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.firstStartDateXE' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" class="w-full" formControlName="firstStartDateXE" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('firstStartDateXE')?.invalid && (form.get('firstStartDateXE')?.dirty) || form.get('firstStartDateXE')?.touched">
                          <span class="validate_input" *ngIf="form.get('firstStartDateXE')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>

        <div class="input-wrapper" >
          <div class="">
            <span class="required-star" >*</span><label class="label-form" for="" >{{'vehicle.legalOwnerId' | translate}}</label>
            <nz-select nzPlaceHolder="Chọn" class="nzSelect"  formControlName="legalOwnerId">
              <nz-option *ngFor="let data of listLegalOwner" [nzValue]="data.id" [nzLabel]="data.name"></nz-option>
            </nz-select>
            <div class="error-container">
                <div *ngIf="form.get('legalOwnerId')?.invalid && (form.get('legalOwnerId')?.dirty) || form.get('legalOwnerId')?.touched">
                    <span class="validate_input" *ngIf="form.get('legalOwnerId')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                </div>
            </div>
        </div>
        </div>

      </div>
      <div style="border-bottom: 1px solid #dddddd;margin-left: 30px; margin-bottom: 15px; margin-top: 15px;"></div>
      <div class="p-4 pt-0 pb-0 form-container" *ngIf="is_New == '0' || is_New == 0">
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.firstSubscriptionDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" [nzDisabledDate]="disableAfterDate('fristRegistrationDate')" class="w-full" formControlName="firstSubscriptionDate" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('firstSubscriptionDate')?.invalid && (form.get('firstSubscriptionDate')?.dirty) || form.get('firstSubscriptionDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('firstSubscriptionDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.fristRegistrationDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" [nzDisabledDate]="disableBeforeDate('firstSubcriptionDate')" formControlName="fristRegistrationDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('fristRegistrationDate')?.invalid && (form.get('fristRegistrationDate')?.dirty) || form.get('fristRegistrationDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('fristRegistrationDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
      </div>
      
      <div class="p-4 pb-0 pt-0 form-container">
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.subscriptionDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" class="w-full" formControlName="subscriptionDate" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('subscriptionDate')?.invalid && (form.get('subscriptionDate')?.dirty) || form.get('subscriptionDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('subscriptionDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.registrationDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" [nzDisabledDate]="disableAfterDate('registrationExpireDate')"   formControlName="registrationDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('registrationDate')?.invalid && (form.get('registrationDate')?.dirty) || form.get('registrationDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('registrationDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.registrationExpireDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy"  [nzDisabledDate]="disableBeforeDate('registrationDate')" formControlName="registrationExpireDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('registrationExpireDate')?.invalid && (form.get('registrationExpireDate')?.dirty) || form.get('registrationExpireDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('registrationExpireDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.tndsInsuranceStartDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" [nzDisabledDate]="disableAfterDate('tndsInsuranceEndDate')"   formControlName="tndsInsuranceStartDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('tndsInsuranceStartDate')?.invalid && (form.get('tndsInsuranceStartDate')?.dirty) || form.get('tndsInsuranceStartDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('tndsInsuranceStartDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.tndsInsuranceEndDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" [nzDisabledDate]="disableBeforeDate('tndsInsuranceStartDate')"  formControlName="tndsInsuranceEndDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('tndsInsuranceEndDate')?.invalid && (form.get('tndsInsuranceEndDate')?.dirty) || form.get('tndsInsuranceEndDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('tndsInsuranceEndDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.materialInsuranceStartDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" [nzDisabledDate]="disableAfterDate('materialInsuranceEndDate')"  formControlName="materialInsuranceStartDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('materialInsuranceStartDate')?.invalid && (form.get('materialInsuranceStartDate')?.dirty) || form.get('materialInsuranceStartDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('materialInsuranceStartDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.materialInsuranceEndDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" [nzDisabledDate]="disableBeforeDate('materialInsuranceStartDate')"   formControlName="materialInsuranceEndDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('materialInsuranceEndDate')?.invalid && (form.get('materialInsuranceEndDate')?.dirty) || form.get('materialInsuranceEndDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('materialInsuranceEndDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.badgeIssuanceStartDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" [nzDisabledDate]="disableAfterDate('badgeIssuanceEndDate')"   formControlName="badgeIssuanceStartDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('badgeIssuanceStartDate')?.invalid && (form.get('badgeIssuanceStartDate')?.dirty) || form.get('badgeIssuanceStartDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('badgeIssuanceStartDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.badgeIssuanceEndDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy"  [nzDisabledDate]="disableBeforeDate('badgeIssuanceStartDate')"  class="w-full" formControlName="badgeIssuanceEndDate" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('badgeIssuanceEndDate')?.invalid && (form.get('badgeIssuanceEndDate')?.dirty) || form.get('badgeIssuanceEndDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('badgeIssuanceEndDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.travelPermitStartDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" class="w-full"  [nzDisabledDate]="disableAfterDate('travelPermitEndDate')" formControlName="travelPermitStartDate" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('travelPermitStartDate')?.invalid && (form.get('travelPermitStartDate')?.dirty) || form.get('travelPermitStartDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('travelPermitStartDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <!--đây là 12-->
  
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.travelPermitEndDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy"   [nzDisabledDate]="disableBeforeDate('travelPermitStartDate')" formControlName="travelPermitEndDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('travelPermitEndDate')?.invalid && (form.get('travelPermitEndDate')?.dirty) || form.get('travelPermitEndDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('travelPermitEndDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
  
        <div class="input-wrapper">
          <div class="">
              <span class="required-star" >*</span><label class="label-form" for="" >{{'vehicle.roadMaintenanceFee' | translate}}</label>
              <input class="input-form" formControlName="roadMaintenanceFee" (input)="updateFormattedPrice()" placeholder="VNĐ"   type="text" >
              <div class="error-container">
                  <div *ngIf="form.get('roadMaintenanceFee')?.invalid && (form.get('roadMaintenanceFee')?.dirty || form.get('roadMaintenanceFee')?.touched)">
                      <span class="validate_input" *ngIf="form.get('roadMaintenanceFee')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                  </div>
              </div>
          </div>
  
        </div>
  
  
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.feePaymentDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" [nzDisabledDate]="disableAfterDate('feeExpireDate')" formControlName="feePaymentDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('feePaymentDate')?.invalid && (form.get('feePaymentDate')?.dirty) || form.get('feePaymentDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('feePaymentDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
  
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" ><span style="color: red">*</span> {{'vehicle.feeExpireDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" [nzDisabledDate]="disableBeforeDate('feePaymentDate')" formControlName formControlName="feeExpireDate" class="w-full" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  <div class="error-container">
                      <div *ngIf="form.get('feeExpireDate')?.invalid && (form.get('feeExpireDate')?.dirty) || form.get('feeExpireDate')?.touched">
                          <span class="validate_input" *ngIf="form.get('feeExpireDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                      </div>
                  </div>
          </div>
        </div>
        <!--đây là 15 16-->
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" for="" >{{'vehicle.cellphonePlan' | translate}}</label>
              <input class="input-form" (blur)="validateText($event)" formControlName="cellphonePlan"  placeholder="Nguyễn văn A"   type="text" >
             
          </div>
  
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" for="" >{{'vehicle.networkProvider' | translate}}</label>
              <input class="input-form" (blur)="validateText($event)"  formControlName="networkProvider" placeholder="Nguyễn văn A"   type="text" >
              
          </div>
  
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" >{{'vehicle.networkRegisterDate' | translate}} </label>
              <nz-date-picker  [nzDisabledDate]="disableAfterDate('networkExpireDate')"  nzFormat="dd/MM/yyyy" class="w-full" formControlName="networkRegisterDate" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  
          </div>
        </div>
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" >{{'vehicle.networkExpireDate' | translate}} </label>
              <nz-date-picker  [nzDisabledDate]="disableBeforeDate('networkRegisterDate')"  nzFormat="dd/MM/yyyy" class="w-full" formControlName="networkExpireDate" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                 
          </div>
        </div>
        <!--đây là 19-->
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" for="" >{{'vehicle.gpsDevice' | translate}}</label>
              <input class="input-form" formControlName="gpsDevice"  placeholder="Nguyễn văn A"   type="text" >
              
          </div>
  
        </div>
  
        <div class="input-wrapper">
          <div class="">
              <label class="label-form" >{{'vehicle.gpsDeviceSetupDate' | translate}} </label>
              <nz-date-picker nzFormat="dd/MM/yyyy" class="w-full" formControlName="gpsDevice" style="width: 100%; height: 48px !important;" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                  
          </div>
        </div>
  
  
      </div>
  
      <div style="border-bottom: 1px solid #dddddd;margin-left: 30px; margin-bottom: 15px; margin-top: 30px"></div>
  
      <div class="mx-4 form-container ">
        <div class=" input-wrapper" >
          <div nz-row>
            <div formGroupName="driver" nz-col nzSpan="24">
              <div class="">
                <div class="">
                  <div class="">
                      <label class="label-form" for="" >{{'vehicle.vehicleDriverMonitor' | translate}}</label>
                      <nz-select nzShowSearch nzAllowClear style="width: 100%;" nzPlaceHolder="Chọn lái xe" formControlName="driverName" >
                        <nz-option *ngFor="let data of listDriver"  [nzLabel]="data.name" [nzValue]="data.id"></nz-option>
                
                      </nz-select>
                  </div>
                  <div style="margin-top: 20px;"></div>
          
                </div>
                
              </div>
            </div>
          </div>
        
          <div nz-row>
            <div nz-col nzSpan="24" formGroupName="driver">
              <div class="">
                <div class="">
                  <div class="">
                      <label class="label-form" for="" >{{'vehicle.vehiclePhone' | translate}}</label>
                      <input class="input-form"  placeholder="Nguyễn văn A" formControlName="phoneNumber"  type="text" >
                      
                  </div>
          
                </div>
                
              </div>
            </div>
          </div>
        </div>
        <div class="mx-2 date-choose ">
            <label class="label-form label_form">{{'vehicle.driverStatus' | translate}}</label>
            <div nz-row nzSpan="5" style="border: 1px solid #d9d9d9; border-radius: 5px ;padding: 5px">
                <div nz-col nzSpan="6" formGroupName="driver">
                    <div class="form-control">
                        <div>
                            <nz-radio-group formControlName="driverStatus">
                                <label nz-radio nzValue="0" style="margin-bottom: 5px !important;">{{'vehicle.permanent' | translate}}</label>
                                <br>
                                <label nz-radio nzValue="1" style="margin-top: 5px !important;">{{'vehicle.temporary' | translate}}</label>
                            </nz-radio-group>
                        </div>
                    </div>
                </div>
                
                <div nz-col nzSpan="18" style="margin-top: 36px; margin-bottom: 18px;" [class.disabled-input]="status_vehicle == 0">
                    <div nz-row style="width: calc(100% - 8px); " formGroupName="driver" >
                        <div style="width: calc(50% - 8px); margin-right: 8px;" >
                            <div class="form-control" style="padding: 0px 0px 0px 0px !important">
                                <label class="label-form">{{'vehicle.fromDate' | translate}}</label>
                                <div class="w-full">
                                    <nz-date-picker class="w-full" style="height: 48px !important;" nzFormat="dd/MM/yyyy" formControlName="startDate" nzPlaceHolder="Chọn ngày"></nz-date-picker>
                                    <!-- <div class="error-container">
                                        <div *ngIf="(form.get('fromDateProbation')?.invalid && (form.get('fromDateProbation')?.dirty ||form.get('fromDateProbation')?.touched)) ">
                                            <span class="validate_input"  *ngIf="form.get('fromDateProbation')?.errors?.['required']">{{'required.date_required' | translate}}</span>
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                        </div>
  
                        <div style="width: calc(50% - 8px);" >
                            <div class="form-control"  style="padding: 0px 0px 0px 0px !important">
                                <label class="label-form">{{'vehicle.toDate' | translate}}</label>
                                <div class="w-full">
                                    <nz-date-picker class="w-full" nzFormat="dd/MM/yyyy" style="height: 48px !important;" formControlName="endDate" nzPlaceHolder="Chọn ngày" ></nz-date-picker>
                                        <!-- <div class="error-container">
                                            <div *ngIf="(form.get('toDate')?.invalid && (form.get('toDate')?.dirty ||form.get('toDate')?.touched))">
                                                <span class="validate_input">{{'required.date_required' | translate}}</span>
                                            </div>
                                        </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
  
  
                </div>
            </div>
        </div>
        
    
    </div>
      
      <div class="flex justify-end p-2"><i class="required-star">{{'vehicle.enterAllInStar' | translate}}</i></div>
    </div>
  
    <div class="flex justify-end m-2">
      <span>
        <!-- <button class="button" (click)="resetForm()" type="button" nz-button nzType="default" [disabled]="!isSubmitted || resetDisabled">Reset</button> -->
        <button class="button" (click)="resetForm()" type="button" nz-button nzType="default">Reset</button>

      </span>
      <span class="ml-2">
        <button class="button" type="submit"  nz-button nzType="default" >Xác nhận</button>
        <!-- <button class="button" type="submit"  nz-button nzType="default" [disabled]="!form.valid || submitDisabled" >Xác nhận</button> -->
      </span>
    </div>
  </form>
</div>

<nz-modal [(nzVisible)]="isShowModalUploadfile" [nzTitle]="modalTitle" 
[nzContent]="modalContent" [nzFooter]="null" nzClassName="reset-employee-modal" [nzMaskClosable]="true"
  (nzOnCancel)="handleCancel()" [nzStyle]="previewImage ? {'width': '496px', 'height': '612px'} : {'width': '576px', 'height': '468px'}" nzCentered="true">
  <ng-template #modalTitle>Tải ảnh lên</ng-template>

  <ng-template #modalContent>
    <div class="upload-container flex justify-center items-center" [ngClass]="{'has-image': previewImage}">
      <!-- Khu vực chọn ảnh -->
      <div class="upload-area">
        <div *ngIf="!previewImage" class="upload-placeholder"
        [class.drag-over]="isDragOver"
        (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave($event)"
        (drop)="onDrop($event)"
        >
          <span class="justify-center align-items flex">
            <span class="justify-center align-items flex">
              <svg width="64" height="65" viewBox="0 0 64 65" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_267_12502)">
              <path d="M0.00805664 12.5C0.00805664 10.3783 0.850911 8.34344 2.3512 6.84315C3.85149 5.34285 5.88632 4.5 8.00806 4.5H56.0081C58.1298 4.5 60.1646 5.34285 61.6649 6.84315C63.1652 8.34344 64.0081 10.3783 64.0081 12.5V52.5C64.0081 54.6217 63.1652 56.6566 61.6649 58.1569C60.1646 59.6571 58.1298 60.5 56.0081 60.5H8.00806C5.88632 60.5 3.85149 59.6571 2.3512 58.1569C0.850911 56.6566 0.00805664 54.6217 0.00805664 52.5V12.5ZM4.00806 48.5V52.5C4.00806 53.5609 4.42948 54.5783 5.17963 55.3284C5.92978 56.0786 6.94719 56.5 8.00806 56.5H56.0081C57.0689 56.5 58.0863 56.0786 58.8365 55.3284C59.5866 54.5783 60.0081 53.5609 60.0081 52.5V38.5L44.9001 30.712C44.5249 30.5241 44.1002 30.4589 43.686 30.5257C43.2719 30.5924 42.8891 30.7878 42.5921 31.084L27.7521 45.924L17.1121 38.836C16.7279 38.5802 16.2671 38.4652 15.8078 38.5104C15.3485 38.5556 14.919 38.7583 14.5921 39.084L4.00806 48.5ZM24.0081 22.5C24.0081 20.9087 23.3759 19.3826 22.2507 18.2574C21.1255 17.1321 19.5994 16.5 18.0081 16.5C16.4168 16.5 14.8906 17.1321 13.7654 18.2574C12.6402 19.3826 12.0081 20.9087 12.0081 22.5C12.0081 24.0913 12.6402 25.6174 13.7654 26.7426C14.8906 27.8679 16.4168 28.5 18.0081 28.5C19.5994 28.5 21.1255 27.8679 22.2507 26.7426C23.3759 25.6174 24.0081 24.0913 24.0081 22.5Z" fill="#A8BADB"/>
              </g>
              <defs>
              <clipPath id="clip0_267_12502">
              <rect width="64" height="64" fill="white" transform="translate(0 0.5)"/>
              </clipPath>
              </defs>
              </svg>
              </span>
          </span>
          <p style="color: rgba(107, 114, 128, 1); font-weight: 500; font-size: 16px;">
            Kéo hình ảnh vào đây hoặc nhấn để 
            <a (click)="fileInput.click()" style="text-decoration: underline; color: rgba(39, 78, 161, 1);">tải ảnh lên</a>
          </p>
        </div>
        <div *ngIf="previewImage" class="image-container relative">
          <img [src]="previewImage" alt="Preview" class="image-preview" (click)="openFullImage(previewImage)" />
          
          <button class="delete-icon" (click)="removeImage()">
            <svg style="fill: rgba(247, 247, 247, 1);" width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M2.8335 15.5C2.37516 15.5 1.9828 15.3368 1.65641 15.0104C1.33002 14.684 1.16683 14.2917 1.16683 13.8333V3H0.333496V1.33333H4.50016V0.5H9.50016V1.33333H13.6668V3H12.8335V13.8333C12.8335 14.2917 12.6703 14.684 12.3439 15.0104C12.0175 15.3368 11.6252 15.5 11.1668 15.5H2.8335ZM4.50016 12.1667H6.16683V4.66667H4.50016V12.1667ZM7.8335 12.1667H9.50016V4.66667H7.8335V12.1667Z" fill="#F7F7F7"/>
              </svg>  
            <span style="color: rgba(247, 247, 247, 1)">Xóa</span>
          </button>
        </div>
      </div>
      <input #fileInput type="file" accept="image/*" (change)="onFileSelected($event)" style="display: none;" />
    </div>
    
    <div class="flex justify-center align-center p-2 ">

      <button class="button-infor"*ngIf="previewImage" type="button" (click)="fileInput.click()">
        <svg class="icon-svg" [ngClass]="{'has-image': previewImage, 'no-image': !previewImage}"  width="15" height="14"  viewBox="0 0 15 14" xmlns="http://www.w3.org/2000/svg">
          <path d="M6.66683 10.3333V3.54167L4.50016 5.70834L3.3335 4.5L7.50016 0.333336L11.6668 4.5L10.5002 5.70834L8.3335 3.54167V10.3333H6.66683ZM2.50016 13.6667C2.04183 13.6667 1.64947 13.5035 1.32308 13.1771C0.996691 12.8507 0.833496 12.4583 0.833496 12V9.5H2.50016V12H12.5002V9.5H14.1668V12C14.1668 12.4583 14.0036 12.8507 13.6772 13.1771C13.3509 13.5035 12.9585 13.6667 12.5002 13.6667H2.50016Z"/>
          </svg>
          <span >Tải lên ảnh khác</span>  
        </button>

    </div>
  </ng-template>
</nz-modal>

<nz-modal 
  [(nzVisible)]="isFullImageVisible" 
  [nzFooter]="null" 
  [nzClosable]="false" 
  [nzMaskClosable]="true"
  (nzOnCancel)="isFullImageVisible = false" 
  [nzContent]="modalContentFull" 
  [nzStyle]="{'width': '100%', 'height': '100vh'}"
  nzClassName="custom-modal-full"
>
  <ng-template #modalContentFull>
    <div class="div-img-full">
      <img [src]="fullImageSrc" class="full-image" />
    </div>
  </ng-template>
</nz-modal>


<nz-modal [(nzVisible)]="isDone" (nzOnCancel)="handleCancelDone1()" (nzOnOk)="handleSubmitDone()"
    [nzContent]="modalContentDone" [nzFooter]="null" [nzStyle]="{'min-width' : '560px', 'min-height':'760px'}">
    <ng-template #modalContentDone>
        <div class="headmodal">
            <span style="color: green; justify-content: center; align-items: center; font-size: 55px" nz-icon nzType="check-circle" nzTheme="outline"></span>
        </div>
        <div >
            <div style="text-align: center;"><span style="color: green; font-size: 25px; ">Thêm thành công!</span><br><span style="font-size: 20px;">Bạn có muốn tiếp tục thêm nhân sự không? </span></div>
            
            <div style="display: flex; gap: 8px; justify-content: center; margin-top: 20px"> 
                <span>
                    <button class="button-infor" nz-button style="color: #274EA1;" nzType="default"
                        (click)="endClick()">Thêm mới</button>
                </span>
                <span>
                    <button class="button-infor" nz-button style="color: #ffffff; background-color: #274EA1;" nzType="default"
                        (click)="handleSubmitDone()">Đến danh sách</button>
                </span>
            </div>
        </div>
        
    </ng-template>
</nz-modal>
