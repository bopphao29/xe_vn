<div class="p-4 pb-0" style="background-color: #f7f7f7; padding-bottom: 100px; ">
    <form nz-form nzGutter="16" class="w-full" nzLayout="vertical" [formGroup]="form" (ngSubmit)="saveDataEmployee()">
        <div nz-row>
            <div nz-col nzSpan="14">
                <button type="button" (click)="onBack($event); " class="flex" style="margin-top: 10px;">
                    <span class="mx-2 " style="margin-top: 3px ; cursor: pointer;">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3.825 9L9.425 14.6L8 16L0 8L8 0L9.425 1.4L3.825 7H16V9H3.825Z" fill="#274EA1" />
                        </svg>
                    </span>
                    <span>
                        Quay lại
                        
                    </span>
                </button>
                </div>
            <div nz-col nzSpan="10">
                <div class="flex justify-end" style="margin-top: 10px;">
                    <span class="mx-2" *ngIf="isFixEmployeeButton == false">
                        <button type="button" (click)="editEmployee()" class="button-infor" nz-button style="color: #274EA1;" nzType="default">
                            <svg width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M0 15.5V11.9583L11 0.979167C11.1667 0.826389 11.3507 0.708333 11.5521 0.625C11.7535 0.541667 11.9653 0.5 12.1875 0.5C12.4097 0.5 12.625 0.541667 12.8333 0.625C13.0417 0.708333 13.2222 0.833333 13.375 1L14.5208 2.16667C14.6875 2.31944 14.809 2.5 14.8854 2.70833C14.9618 2.91667 15 3.125 15 3.33333C15 3.55556 14.9618 3.76736 14.8854 3.96875C14.809 4.17014 14.6875 4.35417 14.5208 4.52083L3.54167 15.5H0ZM12.1667 4.5L13.3333 3.33333L12.1667 2.16667L11 3.33333L12.1667 4.5Z"
                                    fill="#274EA1" />
                            </svg>
        
                            <span>Sửa</span>
                        </button>
                    </span>
                    <span  class="mx-2" *ngIf="isFixEmployeeButton == false">
                        <button type="button" (click)="isModalInforEmployee = true" class="button-infor" nz-button style="border-color: #EF4444 !important;" nzType="default">
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path style="fill:#EF4444 ;" d="M1.33335 11.8334L0.166687 10.6667L4.83335 6.00008L0.166687 1.33341L1.33335 0.166748L6.00002 4.83341L10.6667 0.166748L11.8334 1.33341L7.16669 6.00008L11.8334 10.6667L10.6667 11.8334L6.00002 7.16675L1.33335 11.8334Z" fill="#EF4444"/>
                                </svg>
                                
                            <span style="color: #EF4444; font-size: 16px;font-weight: 500;">Thôi việc</span>
                        </button>
                    </span>
                    <span  class="mx-2" *ngIf="isFixEmployeeButton == false">
                        <button type="button" (click)="pdfExport()"
                         class="button-infor" nz-button style="color: #274EA1;" nzType="default">
                            <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M11.6667 3.33333H2.33333C1.22667 3.33333 0.333332 4.22667 0.333332 5.33333V8C0.333332 8.73333 0.933332 9.33333 1.66667 9.33333H3V10.6667C3 11.4 3.6 12 4.33333 12H9.66667C10.4 12 11 11.4 11 10.6667V9.33333H12.3333C13.0667 9.33333 13.6667 8.73333 13.6667 8V5.33333C13.6667 4.22667 12.7733 3.33333 11.6667 3.33333ZM9 10.6667H5C4.63333 10.6667 4.33333 10.3667 4.33333 10V7.33333H9.66667V10C9.66667 10.3667 9.36667 10.6667 9 10.6667ZM11.6667 6C11.3 6 11 5.7 11 5.33333C11 4.96667 11.3 4.66667 11.6667 4.66667C12.0333 4.66667 12.3333 4.96667 12.3333 5.33333C12.3333 5.7 12.0333 6 11.6667 6ZM10.3333 0H3.66667C3.3 0 3 0.3 3 0.666667V2C3 2.36667 3.3 2.66667 3.66667 2.66667H10.3333C10.7 2.66667 11 2.36667 11 2V0.666667C11 0.3 10.7 0 10.3333 0Z"
                                    fill="#274EA1" />
                            </svg>
                            <span>In</span>
                        </button>
                    </span>
                    <span *ngIf="isFixEmployeeButton == true">
                        <button type="button" (click)="cancelFix()" class="button-infor" nz-button style="color: #274EA1; border-color: #274EA1;" nzType="default">Hủy</button>
                    </span>
                    <span class="ml-2" *ngIf="isFixEmployeeButton == true">
                        <button type="submit" class="button-infor" style="background-color: #274EA1; color: white;" nz-button nzType="default"
                            >Lưu</button>
                    </span>
                    <!-- <div class="flex justify-end m-2">
                        <span>
                            <button class="button" nz-button style="color: #274EA1;" nzType="default">Hủy</button>
                        </span>
                        <span class="ml-2">
                            <button class="button" style="background-color: #274EA1; color: white;" nz-button nzType="default"
                                >Lưu</button>
                        </span>
                    </div> -->
                </div>
            </div>
    
        </div>
        <span class="label_setup mx-2">Chi tiết thông tin nhân sự</span>
        <div style="background-color: #fff; border-radius: 5px;">

            <div class=" form-container p-4 pb-0">

            
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.employeeName' | translate}}</label>
                        <input class="input-form" (input)="validateText('name',$event)" (blur)="onBlur('name')" placeholder="Nguyễn văn A"  formControlName="name" type="text" >
                        <div class="error-container">
                            <div *ngIf="form.get('name')?.invalid && (form.get('name')?.dirty || form.get('name')?.touched)">
                                <span class="validate_input" *ngIf="form.get('name')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                <span class="instruct" *ngIf="form.get('phoneNumber')?.errors?.['pattern']">{{'required.phone_pattern'  | translate}}</span>
                            </div>
                        </div>
                    </div>
    
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.yearOfBirth' | translate}}</label>
                        <input class="input-form"  (input)="validateYearOfBirth('yearOfBirth',$event)" placeholder="2000" formControlName="yearOfBirth" maxlength="4" type="text">
                        <div class="error-container">
                            <div *ngIf="form.get('yearOfBirth')?.invalid && (form.get('yearOfBirth')?.dirty) || form.get('yearOfBirth' | translate)?.touched">
                                <span class="validate_input" *ngIf="form.get('yearOfBirth')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                <span class="instruct" *ngIf="form.get('yearOfBirth')?.errors?.['min'] && !form.get('yearOfBirth')?.errors?.['pattern']">{{ ('required.minYearEmployee' | translate) + minYear }}</span>
                                <span class="instruct" *ngIf="form.get('yearOfBirth')?.errors?.['max'] && !form.get('yearOfBirth')?.errors?.['pattern']">{{ ('required.maxYearEmployee' | translate)+maxYear }}</span>
                                <span class="instruct" *ngIf="form.get('yearOfBirth')?.errors?.['pattern']" >{{'required.number_pattern' | translate}}</span>
                        </div>
                        </div>
                    </div>
    
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.gender' | translate}}</label>
                        <nz-select nzPlaceHolder="Nam" formControlName="gender" class="nzSelect">
                            <nz-option *ngFor="let gender of listGender" [nzValue]="gender.id" [nzLabel]="gender.value"></nz-option>
                        </nz-select>
                        <div class="error-container">
                            <div *ngIf="form.get('gender')?.invalid && (form.get('gender')?.dirty) || form.get('gender')?.touched">
                                <span class="validate_input" *ngIf="form.get('gender')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                            </div>
                        </div>
                    </div>
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.identifier' | translate}}</label>
                        <input class="input-form" placeholder="002096278955"  (input)="validateNumber('identifierId',$event)"  formControlName="identifierId" type="text" maxlength="12">
                        <div class="error-container">
                            <div class="error-container"> 
                                <div *ngIf="form.get('identifierId')?.invalid && (form.get('identifierId')?.dirty) || form.get('identifierId')?.touched">
                                <span class="validate_input" *ngIf="form.get('identifierId')?.errors?.['required']">{{'required.cannotBlank'  | translate}}</span>
                                <span class="instruct" *ngIf="form.get('identifierId')?.errors?.['pattern']">{{'required.identifier_pattern'  | translate}}</span>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.phoneNumber' | translate}}</label>
                        <input class="input-form" placeholder="0379458632"  (input)="validateNumber('phoneNumber',$event)"  formControlName="phoneNumber" type="text" [maxlength]="maxLengthMap['phoneNumber'] || 10">
                        <div class="error-container">
                            <div *ngIf="form.get('phoneNumber')?.invalid && (form.get('phoneNumber')?.dirty) || form.get('phoneNumber')?.touched">
                                <span class="validate_input" *ngIf="form.get('phoneNumber')?.errors?.['required']">{{'required.cannotBlank'  | translate}}</span>
                                <span class="instruct" *ngIf="form.get('phoneNumber')?.errors?.['pattern']">{{'required.phone_pattern'  | translate}}</span>
                            </div>
                        </div>
                    </div>
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.zalo' | translate}}</label>
                        <input class="input-form" (input)="validateText('zalo',$event)" (blur)="onBlur('zalo')"  placeholder="Nguyễn văn A" formControlName="zalo" type="text">
                        <!-- <div class="error-container">
                            <div *ngIf="form.get('zalo')?.invalid && (form.get('zalo')?.dirty) || form.get('zalo')?.touched">
                                <span class="validate_input" *ngIf="form.get('zalo')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                <span class="instruct" *ngIf="form.get('zalo')?.errors?.['pattern']">{{'required.text_pattern' | translate}}</span>
                            </div>
                        </div> -->
                    </div>
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.email' | translate}}</label>
                        <input class="input-form" placeholder="@gmail.com" formControlName="email" type="text">
                        <div class="error-container">
                            <div *ngIf="form.get('email')?.invalid && (form.get('email')?.dirty) || form.get('email')?.touched">
                            <span class="validate_input" *ngIf="form.get('email')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                            <span class="instruct" *ngIf="form.get('email')?.errors?.['email']">{{'required.email_pattern' | translate}}</span>
                        </div>
                        </div>
                    </div>
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.ethnicGroup' | translate}}</label>
                        <input class="input-form" formControlName="ethnicGroup" (input)="validateText('ethnicGroup',$event)" (blur)="onBlur('ethnicGroup')"  placeholder="Nhập" />
                            <div class="error-container">
                                <div *ngIf="form.get('ethnicGroup')?.invalid && (form.get('ethnicGroup')?.dirty) || form.get('ethnicGroup')?.touched">
                                    <span class="validate_input" *ngIf="form.get('ethnicGroup')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                    <span class="instruct" *ngIf="form.get('ethnicGroup')?.errors?.['pattern']">{{'required.text_pattern' | translate}}</span>
                                </div>
                            </div>
                    </div>
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.religion' | translate}}</label>
                        <input class="input-form" formControlName="religion" (input)="validateText('religion',$event)" (blur)="onBlur('religion')"  placeholder="Nhập" />
                            <div class="error-container">
                                <div *ngIf="form.get('religion')?.invalid && (form.get('religion')?.dirty) || form.get('religion')?.touched">
                                    <span class="validate_input" *ngIf="form.get('religion')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                    <span class="instruct" *ngIf="form.get('religion')?.errors?.['pattern']">{{'required.text_pattern' | translate}}</span>
                                </div>
                            </div>
                    </div>
    
                </div>
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.professionalLevel' | translate}}</label>
                        <input class="input-form" formControlName="professionalLevel" placeholder="Nhập" />
                            <div class="error-container">
                                <div *ngIf="form.get('professionalLevel')?.invalid && (form.get('professionalLevel')?.dirty) || form.get('professionalLevel')?.touched">
                                    <span class="validate_input" *ngIf="form.get('professionalLevel')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                </div>
                            </div>
                    </div>
    
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.maritalStatus' | translate}}</label>
                        <nz-select nzPlaceHolder="Chưa kết hôn" formControlName="maritalStatus" class="nzSelect">
                            <nz-option *ngFor="let marialStatus of listMarialStatus" [nzValue]="marialStatus.id" [nzLabel]="marialStatus.value"></nz-option>
                        </nz-select>
                        <div class="error-container">
                            <div *ngIf=" form.get('maritalStatus')?.invalid && (form.get('maritalStatus')?.dirty) ||form.get('maritalStatus')?.touched">
                            <span class="validate_input" *ngIf="form.get('maritalStatus')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                        </div>
                        </div>
                    </div>
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.contactPerson' | translate}}</label>
                        <input class="input-form" formControlName="contactPerson"  (input)="validateText('contactPerson',$event)" (blur)="onBlur('contactPerson')" placeholder="Nhập" />
                            <div class="error-container">
                                <div *ngIf="form.get('contactPerson')?.invalid && (form.get('contactPerson')?.dirty) || form.get('contactPerson')?.touched">
                                    <span class="validate_input" *ngIf="form.get('contactPerson')?.errors?.['required']">{{'required.contactPerson_required' | translate}}</span>
                                    <span class="instruct" *ngIf="form.get('contactPerson')?.errors?.['pattern']">{{'required.cannotBlank' | translate}}</span>
                                </div>
                            </div>
                    </div>
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.contactPersonPhone' | translate}}</label>
                        <input class="input-form" formControlName="contactPersonPhone"  (input)="validateNumber('contactPersonPhone',$event)" placeholder="Nhập" [maxlength]="maxLengthMap['contactPersonPhone'] || 10"/>
                            <div class="error-container">
                                <div class="error-container">
                                    <div *ngIf="form.get('contactPersonPhone')?.invalid && (form.get('contactPersonPhone')?.dirty) || form.get('contactPersonPhone')?.touched">
                                        <span class="validate_input" *ngIf="form.get('contactPersonPhone')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                        <span class="instruct" *ngIf="form.get('contactPersonPhone')?.errors?.['pattern']">{{'required.phone_pattern' | translate}}</span>
                                        <span class="instruct" *ngIf="form.get('contactPersonPhone')?.errors?.['invalidLength']">{{'required.phone_pattern'  | translate}}</span>

                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.staffRelation' | translate}}</label>
                        <input class="input-form" formControlName="staffRelation"  (input)="validateText('staffRelation',$event)" (blur)="onBlur('staffRelation')"  placeholder="Nhập" />
                            <div class="error-container">
                                <div *ngIf="form.get('staffRelation')?.invalid && (form.get('staffRelation')?.dirty) || form.get('staffRelation')?.touched">
                                    <span class="validate_input" *ngIf="form.get('staffRelation')?.errors?.['required']">{{'required.staffRelation_required' | translate}}</span>
                                    <span class="instruct" *ngIf="form.get('staffRelation')?.errors?.['pattern']">{{'required.cannotBlank' | translate}}</span>
                                </div>
                            </div>
                    </div>
                </div>
    
            </div>
            
            <div class="px-4 form-container" nz-row>
           
                <div class="mx-2 adrress-input" >
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.permanentAddress' | translate}}</label>
                        <input class="input-form" formControlName="permanentAddress" placeholder="Nhập" />
                            <div class="error-container">
                                <div *ngIf="form.get('permanentAddress')?.invalid && (form.get('permanentAddress')?.dirty) || form.get('permanentAddress')?.touched">
                                    <span class="validate_input" *ngIf="form.get('permanentAddress')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                </div>
                            </div>
                    </div>
                </div>
    
                <div class="mx-2 adrress-input" >
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.temporaryAddress' | translate}}</label>
                        <input class="input-form" formControlName="temporaryAddress" placeholder="Nhập" />
                            <div class="error-container">
                                <div *ngIf="form.get('temporaryAddress')?.invalid && (form.get('temporaryAddress')?.dirty) || form.get('temporaryAddress')?.touched">
                                    <span class="validate_input" *ngIf="form.get('temporaryAddress')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                </div>
                            </div>
                    </div>
                </div>
    
            </div>

            <div style="border-bottom: 1px solid #dddddd;margin-left: 30px; margin-bottom: 15px;"></div>
    
            <div class="mx-4 form-container ">
                <div class="mx-2 date-choose ">
                    <label class="label-form label_form">{{'employee.workingStatus' | translate}}</label>
                    <div nz-row nzSpan="5" style="border: 1px solid #d9d9d9; border-radius: 5px ;padding: 5px">
                        <div nz-col nzSpan="6">
                            <div class="form-control">
                                <div>
                                    <nz-radio-group formControlName="contractType">
                                        <label nz-radio nzValue="1" style="margin-bottom: 30px !important;">Chính thức</label>
                                        <br>
                                        <label nz-radio nzValue="2" style="margin-top: 32px !important;">Thử việc</label>
                                    </nz-radio-group>
                                </div>
                            </div>
                        </div>
                        <div nz-col nzSpan="18" >
                            <div nz-row style="width: calc(100% - 8px);" [class.disabled-input]="contract_type == 2">
                                <div class="form-control">
                                    <label class="label-form"><span style="width: 100%;" class="required-star" >*</span>{{'employee.fromDate' | translate}}</label>
                                    <div class="w-full">
                                        <nz-date-picker nzFormat="dd/MM/yyyy"
                                            (ngModelChange)="onDateChange('fromDateOfOffical',$event)" class="w-full" formControlName="fromDateOfOffical"
                                            nzPlaceHolder="Chọn ngày"></nz-date-picker>
                                            <div class="error-container">
                                                <div *ngIf="(form.get('fromDateOfOffical')?.invalid && (form.get('fromDateOfOffical')?.dirty ||form.get('fromDateOfOffical')?.touched)) && contract_type == 1">
                                                    <span class="validate_input" *ngIf="form.get('fromDateOfOffical')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                                </div>
                                            </div>
                                    </div>
                                </div>
                            </div>
    
                            <div nz-row style="width: calc(100% - 8px);" >
                                <div style="width: calc(50% - 8px); margin-right: 16px;" [class.disabled-input]="contract_type == 1">
                                    <div class="form-control">
                                        <label class="label-form"><span style="width: 100%;" class="required-star" >*</span>{{'employee.fromDate' | translate}}</label>
                                        <div class="w-full">
                                            <nz-date-picker class="w-full"
                                                nzFormat="dd/MM/yyyy" (ngModelChange)="onDateChange('fromDateProbation', $event)" [nzDisabledDate]="disableFromDate"
                                                formControlName="fromDateProbation" nzPlaceHolder="Chọn ngày"></nz-date-picker>
                                                <div class="error-container">
                                                    <div *ngIf="(form.get('fromDateProbation')?.invalid && (form.get('fromDateProbation')?.dirty ||form.get('fromDateProbation')?.touched)) && contract_type == 2">
                                                        <span class="validate_input"  *ngIf="form.get('fromDateProbation')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                                    </div>
                                                </div>
                                        </div>
                                    </div>
                                </div>
    
                                <div style="width: calc(50% - 8px);" [class.disabled-input]="contract_type == 1">
                                    <div class="form-control">
                                        <label class="label-form"><span style="width: 100%;" class="required-star" >*</span>{{'employee.toDate' | translate}}</label>
                                        <div class="w-full">
                                            <nz-date-picker class="w-full" [nzDisabledDate]="disableIntoToDate" [disabled]="!form.get('fromDate')?.value"
                                                nzFormat="dd/MM/yyyy" (ngModelChange)="onDateChange('toDate',$event)"
                                                formControlName="toDate" nzPlaceHolder="Chọn ngày" ></nz-date-picker>
                                            <div *ngIf="contract_type == 2">
                                                <div class="error-container" *ngIf="contract_type == 2">
                                                    <div *ngIf="(form.get('toDate')?.invalid && (form.get('toDate')?.dirty ||form.get('toDate')?.touched))">
                                                        <span class="validate_input">{{'required.cannotBlank' | translate}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
    
    
                        </div>
                    </div>
                </div>
                <div nz-col class="mx-2 date-choose">
                    <div nz-row>
                        <div nz-col nzSpan="12">
                            <div style="width: calc(100% - 8px);">
                                <div class="">
                                    <label class="label-form" nzRequired><span class="required-star">*</span> {{'employee.office' | translate}}</label>
                                    <div class="w-full">
                                        <nz-select nzPlaceHolder="Chọn" formControlName="officeId" style="width: 100%;">
                                            <nz-option *ngFor="let office of listOffice, let i =index" [nzValue]="office.id"
                                                [nzLabel]="office.name"></nz-option>
    
                                        </nz-select>
                                        <div class="error-container">
                                            <div *ngIf="form.get('officeId')?.invalid && (form.get('officeId')?.dirty) || form.get('officeId')?.touched">
                                                <span class="validate_input" *ngIf="form.get('officeId')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                              
                            </div>
                        </div>
                        <div nz-col nzSpan="12">
                            <div style="width: calc(100% - 8px); margin-left: 8px" >
                               
                                <div class="">
                                    <label class="label-form" nzRequired><span class="required-star">*</span> {{'employee.branch' | translate}}</label>
                                    <div class="w-full">
                                        <nz-select nzPlaceHolder="Chọn" formControlName="branchId" style="width: 100%;">
                                            <nz-option *ngFor="let branch of listBranch, let i =index" [nzValue]="branch.id"
                                                [nzLabel]="branch.name"></nz-option>
    
                                        </nz-select>
                                        <div class="error-container">
                                            <div *ngIf="form.get('branchId')?.invalid && (form.get('branchId')?.dirty) || form.get('branchId')?.touched">
                                                <span class="validate_input" *ngIf="form.get('branchId')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div nz-row>
                        <div nz-col nzSpan="12">
                            <div style="width: calc(100% - 8px);">
                                
                                <div class="">
                                    <label class="label-form" nzRequired><span class="required-star">*</span> {{'employee.department' | translate}}</label>
                                    <div class="w-full">
                                        <nz-select nzPlaceHolder="Chọn" formControlName="departmentId" style="width: 100%;">
                                            <nz-option *ngFor="let department of listDepartment, let i =index" [nzValue]="department.id"
                                                [nzLabel]="department.name"></nz-option>
    
                                        </nz-select>
                                        <div class="error-container">
                                            <div *ngIf="form.get('departmentId')?.invalid && (form.get('departmentId')?.dirty) || form.get('departmentId')?.touched">
                                                <span class="validate_input"
                                                *ngIf="form.get('departmentId')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div nz-col nzSpan="12">
                           
                            <div style="width: calc(100% - 8px);  margin-left: 8px">
                                <label class="label-form"><span class="required-star">*</span> {{'employee.position' | translate}}</label>
                                <div class="w-full">
                                    <nz-select nzPlaceHolder="Chọn" formControlName="positionId" style="width: 100%;">
                                        <nz-option *ngFor="let position of listPosstion, let i =index" [nzValue]="position.id"
                                            [nzLabel]="position.name"></nz-option>
    
                                    </nz-select>
                                    <div class="error-container">
                                        <div *ngIf="form.get('positionId')?.invalid && (form.get('positionId')?.dirty) || form.get('positionId')?.touched">
                                            <span class="validate_input"
                                            *ngIf="form.get('positionId')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

 
            

                <div nz-col class="mx-2 labor-contract">
                    <label class="label-form label_form"><span class="required-star">*</span> {{ 'employee.laborContract' | translate}}</label>
                    <div class="" style="border: 1px solid #d9d9d9; border-radius: 5px ;padding: 5px; margin-bottom: 20px;" formArrayName="contract">
                        <div  nz-row *ngFor="let contract of lstcontractDTO.controls; let i = index" [formGroupName]="i" style="width: 100%">
                            <div class="form-col" nz-col  style="width: 30%" >
                                <div class="mx-2 ">
                                    <label class="label-form"><span class="required-star">*</span> {{ 'employee.dateOfSigning' | translate}}</label>
                                        <div style="width: 100%;" >
                                            <nz-date-picker nzFormat="dd/MM/yyyy" (ngModelChange)="onDateChange(['lstcontractDTO', i, 'signDate'],$event)"
                                                formControlName="signDate" class="w-full"  [nzDisabledDate]="disableSignDate(i)"
                                                nzPlaceHolder="Chọn ngày"></nz-date-picker>
                                            <div class="error-container">
                                                <div *ngIf=" contract.get('signDate')?.touched">
                                                <span class="validate_input" *ngIf="contract.get('signDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                            </div>
                                            </div>
                                        </div>
                                </div>
                            </div>
                            <div class="form-col" nz-col  style="width: 30%">
                                <div class="mx-2">
                                    <div style="width: 100%;">
                                        <label class="label-form"><span class="required-star">*</span> {{ 'employee.laborContractFile' | translate}}</label>
                                        <div style="width: 100%;">
                                                <div style="width: 100%" nz-row nzGutter="8" class="custom-upload"
                                                    style="border: 1px solid #d9d9d9; border-radius: 5px; padding: 5px;">
                                                    <input nz-input placeholder="Chọn File" readonly class="upload-input"
                                                        style="border: none; outline: none; flex: 1;" formControlName="file"
                                                        [value]="lstcontractDTO.at(i).get('file')?.value?.name || ''" />
                                                    <button *ngIf="isFixEmployeeButton == true" nz-button nzType="default" nzShape="circle" class="upload-button"
                                                        (click)="fileInput.click()" style="border: none; background:s transparent;" type="button">
                                                        <i nz-icon nzType="paper-clip"></i>
                                                        <input type="file" #fileInput (change)="onFileChangeContract($event, 'file', i)"
                                                            style="display: none;" />
                                                    </button>
                                                    <button *ngIf="isFixEmployeeButton == false && lstcontractDTO.length > 0" nz-button nzType="default" matTooltip="Tải file" matTooltipPosition="above" nzShape="circle" class="upload-button"
                                                        type="button" (click)="downloadFileMinio('file', i, 'lstcontractDTO')" style="border: none; background: transparent;">
                                                        <span nz-icon nzType="arrow-down" nzTheme="outline"></span>
                                                        
                                                    </button>
                                                </div>
                                                <div class="error-container">
                                                    <div *ngIf="contract.get('file')?.touched">
                                                        <span class="validate_input"
                                                            *ngIf="contract.get('file')?.errors?.['required']">{{ 'required.cannotBlank' | translate}}</span>
                                                    </div>
                                                </div>
                                        </div>
                                        </div>
                                </div>
                            </div>
                            <div nz-col class="form-col"  style="width: 30%">
                                <div class="">
                                    <label class="label-form">{{ 'employee.toDate' | translate}}</label>
                                    <div style="width: 100%;" >
                                        <nz-date-picker nzFormat="dd/MM/yyyy" (ngModelChange)="onDateChange(['lstcontractDTO', i, 'endDate'],$event)"
                                            formControlName="endDate" class="w-full" [nzDisabledDate]="disableIntoEndDate(i)"
                                            nzPlaceHolder="Chọn ngày"></nz-date-picker>
                                        <!-- <div class="error-container">
                                            <div *ngIf=" contract.get('signDate')?.touched">    
                                            <span class="validate_input" *ngIf="contract.get('signDate')?.errors?.['required']">{{'required.signDate' | translate}}</span>
                                        </div>
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                            <div nz-col *ngIf="lstcontractDTO.length >= 1 && isFixEmployeeButton == true" style="display: flex; justify-content: center; align-items: center;width: 10%">
                                <button type="button" nz-button (click)="removeContract(i)" style=" border: none;" >
                                    <svg width="16" height="19" viewBox="0 0 16 19" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M3 18.5C2.45 18.5 1.97917 18.3042 1.5875 17.9125C1.19583 17.5208 1 17.05 1 16.5V3.5H0V1.5H5V0.5H11V1.5H16V3.5H15V16.5C15 17.05 14.8042 17.5208 14.4125 17.9125C14.0208 18.3042 13.55 18.5 13 18.5H3ZM5 14.5H7V5.5H5V14.5ZM9 14.5H11V5.5H9V14.5Z"
                                            fill="#EF4444" />
                                    </svg>
    
                                </button>
                            </div>
                        </div>
                        <div nz-row>
                            <div nz-row class="w-full" style="margin-bottom: 31px;">
                                <div nz-row *ngIf="isFixEmployeeButton == true">
                                    <button (click)="addContract()" type="button" class="button_add mx-2"><svg
                                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                            stroke-width="1.5" stroke="currentColor" class="size-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 


                
            </div>
            <div class="form-container p-4 pb-0" nz-row *ngIf="hasDriver == true">

                <div class="input-wrapper ">
                    <div class="">
                        <label class="label-form" ><span class="required-star">*</span> {{'employee.route' | translate}}</label>
                        <nz-select nzPlaceHolder="Chọn" formControlName="routeId" style="width: 100%;">
                            <!-- <nz-option nzValue="1" nzLabel="D"></nz-option> -->
                            <!-- <nz-option nzValue="2" nzLabel="E"></nz-option> -->
                            <nz-option *ngFor="let route of listRoute, let i =index" [nzValue]="route.id"
                                [nzLabel]="route.name"></nz-option>
    
                        </nz-select>
                        <div class="error-container">
                            <div *ngIf="form.get('routeId')?.touched">
                                <span class="validate_input"
                                    *ngIf="form.get('routeId')?.hasError('required')">{{'required.route_required' | translate}}</span>
                            </div>
                        </div>
                    </div>
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.businessCardNumber' | translate}}</label>
                        <input class="input-form"  placeholder="Nguyễn văn A"  formControlName="businessCardNumber" type="text" >
                        <div class="error-container">
                            <div *ngIf="form.get('businessCardNumber')?.invalid && (form.get('businessCardNumber')?.dirty || form.get('businessCardNumber')?.touched)">
                                <span class="validate_input" *ngIf="form.get('businessCardNumber')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                 <span class="instruct" *ngIf="form.get('businessCardNumber')?.errors?.['pattern']">{{'required.number_pattern' | translate}}</span>
                                
                            </div>
                        </div>
                    </div>
    
                </div>
    
                <div  class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" >Ngày cấp </label>
                        <nz-date-picker nzFormat="dd/MM/yyyy" class="w-full" (ngModelChange)="onDateChange('bcStartDate',$event)" style="width: 100%"
                        [nzDisabledDate]="disableAfterDateDriver('bcEndDate')"
                                formControlName="bcStartDate" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                            <div class="error-container">
                                <div *ngIf="form.get('bcStartDate')?.touched">
                                    <span class="validate_input" *ngIf="form.get('bcStartDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>

                                </div>
                            </div>
                    </div>
                </div>
    
                <div  class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" >Ngày hết hạn </label>
                        <nz-date-picker nzFormat="dd/MM/yyyy" class="w-full" (ngModelChange)="onDateChange('bcEndDate',$event)" style="width: 100%"
                        [nzDisabledDate]="disableBeforeDateDriver('bcStartDate')"
                                formControlName="bcEndDate" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                            <div class="error-container">
                                <div *ngIf="form.get('bcEndDate')?.touched">
                                    <span class="validate_input" *ngIf="form.get('bcEndDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>

                                </div>
                            </div>
                    </div>
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" >{{'employee.picture_card' | translate}}</label>
                        <div nz-row nzGutter="8" class="custom-upload"
                                style="border: 1px solid #d9d9d9; border-radius: 5px; padding: 5px;">
                                <input nz-input placeholder="Chọn ảnh" readonly class="upload-input"
                                    style="border: none; outline: none; flex: 1;" formControlName="bcImage"
                                    [value]="bcImageName  || ''" />
                                <button nz-button nzType="default" *ngIf="isFixEmployeeButton == true" nzShape="circle" type="button" class="upload-button"
                                    (click)="filebc.click()" style="border: none; background: transparent;">
                                    <i nz-icon nzType="paper-clip" matTooltipClass="custom-tooltip"  matTooltip="jpeg, jpg, png, svg, heic, webp" matTooltipPosition="above"></i>
                                    <input type="file" #filebc (change)="onChangeImage($event, 'bcImage')"
                                        style="display: none;" accept=".png, .jpeg, .svg, .jpg, .heic, .webp"/>
                                </button>
                                <button *ngIf="isFixEmployeeButton == false && this.form.get('bcImage')?.value" nz-button nzType="default" matTooltip="Tải xuống" matTooltipPosition="above" nzShape="circle" class="upload-button"
                                    type="button" (click)="downloadImage('bcImage')" style="border: none; background: transparent;">
                                    <span nz-icon nzType="arrow-down" nzTheme="outline"></span>
            
                                </button>
                            </div>
                            <div class="error-container">
                                <div *ngIf="form.get('bcImage')?.touched">
                                    <span class="validate_input" *ngIf="form.get('bcImage')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                                </div>
                            </div>
                    </div>
                </div>
    
                <div  class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" >Giấy khám sức khỏe</label>
                        <div nz-row nzGutter="8" class="custom-upload"
                                style="border: 1px solid #d9d9d9; border-radius: 5px; padding: 5px;">
                                <input nz-input placeholder="Chọn file" readonly class="upload-input" 
                                    style="border: none; outline: none; flex: 1; width: 100%" formControlName="healthCertificate"
                                    [value]="fileCompressed.healthCertificate.length > 0 ? fileCompressed.healthCertificate[0].name : ''" />
    
                                <button *ngIf="isFixEmployeeButton == true" nz-button nzType="default" nzShape="circle" class="upload-button" type="button"
                                    (click)="fileInput.click()" style="border: none; background: transparent;">
                                    <i nz-icon nzType="paper-clip"></i>
                                    <input type="file" #fileInput (change)="onChange($event, 'healthCertificate')"
                                        style="display: none;" />
                                </button>
                                <button *ngIf="isFixEmployeeButton == false && this.form.get('healthCertificate')?.value" nz-button nzType="default" matTooltip="Tải xuống" matTooltipPosition="above" nzShape="circle" class="upload-button"
                                    type="button" (click)="downloadImage('healthCertificate')" style="border: none; background: transparent;">
                                    <span nz-icon nzType="arrow-down" nzTheme="outline"></span>
                                </button>
                            </div>
                            <div class="error-container">
                                <div *ngIf="form.get('healthCertificate')?.touched">
                                    <span class="validate_input" *ngIf="form.get('healthCertificate')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                                </div>
                            </div>
                    </div>
                </div>
    
                <div  class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" >Ngày hết hạn GKSK </label>
                        <nz-date-picker nzFormat="dd/MM/yyyy" class="w-full" (ngModelChange)="onDateChange('hcEndDate',$event)" style="width: 100%;"
                                formControlName="hcEndDate" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                            <div class="error-container">
                                <div *ngIf="form.get('hcEndDate')?.touched">
                                    <span class="validate_input" *ngIf="form.get('hcEndDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>

                                </div>
                            </div>
                    </div>
                </div>
            </div>
            <div class="p-4 pb-0" nz-row *ngIf="hasDriver == true">
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" >{{'employee.number_healthCertificate' | translate}}</label>
                        <input nz-input class="form-input" formControlName="driverLicenseNumber" placeholder="Nhập"
                                class="form-input" style="width: 100%;"/>
                           <div class="error-container">
                            <div *ngIf="form.get('driverLicenseNumber')?.invalid && (form.get('driverLicenseNumber')?.dirty) || form.get('driverLicenseNumber')?.touched">
                            <span class="validate_input" *ngIf="form.get('driverLicenseNumber')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>

                        </div>
                           </div>
                    </div>
                </div>
    
                <div  class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form"  style="padding-left: none;">{{'employee.driverLicense' | translate}}</label>
                        <nz-select nzPlaceHolder="Chọn" formControlName="driverLicenseType" style="width: 100%;">
                            <nz-option *ngFor="let driverL of driverLicense, let i = index"[nzValue]="driverL.id" [nzLabel]="driverL.value"></nz-option>
                            
                        </nz-select>
                        <div class="error-container">
                            <div
                                *ngIf=" form.get('driverLicenseType')?.invalid && (form.get('driverLicenseType')?.dirty) ||form.get('driverLicenseType')?.touched">
                                <span class="validate_input" *ngIf="form.get('driverLicenseType')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                            </div>
                        </div>
                    </div>
                    
                </div>
    
                <div class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" >{{'employee.day_start' | translate}}</label>
                        <nz-date-picker nzFormat="dd/MM/yyyy" class="w-full" (ngModelChange)="onDateChange('dlStartDate',$event)"
                        [nzDisabledDate]="disableAfterDateDriver('dlEndDate')"  style="width: 100%"
    
                                formControlName="dlStartDate" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                            <div class="error-container">
                                <div *ngIf="form.get('dlStartDate')?.touched">
                                    <span class="validate_input" *ngIf="form.get('dlStartDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>

                                </div>
                            </div>
                    </div>
                </div>
    
                <div  class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" >{{'employee.day_end' | translate}}  </label>
                        <nz-date-picker nzFormat="dd/MM/yyyy" class="w-full" (ngModelChange)="onDateChange('dlEndDate',$event)"
                        [nzDisabledDate]="disableBeforeDateDriver('dlStartDate')"  style="width: 100%"
                                formControlName="dlEndDate" nzPlaceHolder="{{'Chọn ngày' | translate}}"></nz-date-picker>
                            <div class="error-container">
                                <div *ngIf="form.get('dlEndDate')?.touched">
                                    <span class="validate_input" *ngIf="form.get('dlEndDate')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>

                                </div>
                            </div>
                    </div>
                </div>
    
                <div  class="input-wrapper">
                    <div class="">
                        <span class="required-star" >*</span><label class="label-form" >{{'employee.picture_driverLicens' | translate}}</label>
                        <div nz-row nzGutter="8" class="custom-upload"
                                style="border: 1px solid #d9d9d9; border-radius: 5px; padding: 5px;">
                                <input nz-input placeholder="Chọn ảnh" readonly class="upload-input" style="width: 100%"
                                    style="border: none; outline: none; flex: 1;" formControlName="dlImage"
                                    [value]="dlImageName" />
                                <button *ngIf="isFixEmployeeButton == true" nz-button nzType="default" nzShape="circle" class="upload-button" type="button"
                                    (click)="fileImg.click()" style="border: none; background: transparent;">
                                    <i nz-icon nzType="paper-clip" matTooltipClass="custom-tooltip"  matTooltip="jpeg, jpg, png, svg, heic, webp" matTooltipPosition="above"></i>
                                    <input type="file" #fileImg (change)="onChangeImage($event, 'dlImage')" accept=".png, .jpeg, .svg, .jpg, .heic, .webp"
                                        style="display: none;" />
                                </button>
                                <button *ngIf="isFixEmployeeButton == false && this.form.get('dlImage')?.value" nz-button nzType="default" matTooltip="Tải xuống" matTooltipPosition="above" nzShape="circle" class="upload-button"
                                    type="button" (click)="downloadImage('dlImage')" style="border: none; background: transparent;">
                                    <span nz-icon nzType="arrow-down" nzTheme="outline"></span>
                                </button>
                            </div>
                            <div *ngIf="form.get('dlImage')?.invalid && (form.get('dlImage')?.dirty) || form.get('dlImage')?.touched">
                                <span class="validate_input" *ngIf="form.get('dlImage')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                            </div>
                    </div>
                </div>
    
    
            </div>
            <div style="border-bottom: 1px solid #dddddd;margin-left: 30px; margin-bottom: 15px;margin-top: 20px;"></div>
            <div nz-row class="mx-4 form-container">

                <div nz-col class="recordStorage" style="margin-left:8px" >
                    <label class="label-form label_form" >{{'employee.archivedRecords' | translate}} </label>
                        <div nz-row formArrayName="lstArchivedRecords" class="lstArchivedRecords"
                        style="border: 1px solid #d9d9d9; border-radius: 5px ;padding: 5px; margin-bottom: 20px;width: calc(100% - 16px);">
                        <div nz-row style="display: flex; flex-wrap: nowrap; width: 100%"
                            *ngFor="let doc of lstArchivedRecords.controls; let docIndex = index"
                            [formGroupName]="docIndex">
                            <div nz-col style="width: calc(25%)">
                                <div class="mx-2">
                                    <div class="">
                                        <label class="label-form">{{'employee.name_file' | translate}}</label>
                                        <input nz-input class="form-input" formControlName="name" placeholder="Nhập" style="width: 100%"/>
                                        <div class="error-container">
                                             <div *ngIf="doc.get('name')?.invalid && (doc.get('name')?.dirty) || doc.get('name')?.touched">
                                                 <span class="validate_input" *ngIf="doc.get('name')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                             </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div nz-col style="width: calc(20%)">
                                <div class="mx-2">
                                    <div class="">
                                        <label class="label-form">{{'employee.number1' | translate}}</label>
                                        <div>
                                            <input nz-input class="form-input" formControlName="code" placeholder="Nhập" />
                                            <div class="error-container">
                                                <div *ngIf="doc.get('code')?.invalid && (doc.get('code')?.dirty) || doc.get('code')?.touched">
                                                    <span class="validate_input" *ngIf="doc.get('code')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div nz-col style="width: calc(25%)">
                                <div class="mx-2">
                                    <div class="">
                                        <label class="label-form">{{'employee.type_file' | translate}}</label>
                                        <div>
                                            <input nz-input class="form-input" formControlName="type" placeholder="Nhập" />
                                            <div class="error-container">
                                                <div *ngIf="doc.get('type')?.invalid && (doc.get('type')?.dirty) || doc.get('type')?.touched">
                                                    <span class="validate_input" *ngIf="doc.get('type')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div nz-col style="width: calc(20%)">
                                <div class="mx-2">
                                    <div class="">
                                        <label class="label-form">{{'employee.file_together' | translate}}</label>
                                        <div>
    
                                            <div nz-row nzGutter="8" class="custom-upload"
                                                style="border: 1px solid #d9d9d9; border-radius: 5px; padding: 5px;">
                                                <input nz-input placeholder="Chọn file" readonly class="upload-input"
                                                    style="border: none; outline: none; flex: 1;" formControlName="file"
                                                    [value]="lstArchivedRecords.at(docIndex).get('file')?.value?.name || ''" />
                                                <button *ngIf="isFixEmployeeButton == true" nz-button nzType="default" nzShape="circle" class="upload-button" 
                                                    (click)="fileInput.click()" type="button"
                                                    style="border: none; background: transparent;">
                                                    <i nz-icon nzType="paper-clip"></i>
                                                    <input type="file" #fileInput (change)="onFileChangeAchi($event,'file', docIndex)" style="display: none;" />
                                                </button>
                                                <button *ngIf="isFixEmployeeButton == false && showInforEmployee['lstArchivedRecords'].length > 0" nz-button nzType="default" matTooltip="Tải file" matTooltipPosition="above" nzShape="circle" class="upload-button"
                                                    type="button" (click)="downloadFileMinio('file', docIndex, 'lstArchivedRecords')" style="border: none; background: transparent;">
                                                    <span nz-icon nzType="arrow-down" nzTheme="outline"></span>
                                                    
                                                </button>
                                            </div>
                                            <div class="error-container">
                                                <div *ngIf="doc.get('file')?.invalid && (doc.get('file')?.dirty) || doc.get('file')?.touched">
                                                    <span class="validate_input"
                                                        *ngIf="doc.get('file')?.errors?.['required']">{{'required.cannotBlank' | translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div nz-col style="width: calc(10%); display: flex; justify-content: center; align-items: center;">
                                <button type="button" nz-button (click)="removeArchivedRecord(docIndex)" [hidden]="lstArchivedRecords.length == 1" *ngIf="(lstArchivedRecords.length > 1 ||  lstArchivedRecords.at(0).invalid ) && isFixEmployeeButton == true" style=" border: none;" >
                                    <svg width="16" height="19" viewBox="0 0 16 19" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M3 18.5C2.45 18.5 1.97917 18.3042 1.5875 17.9125C1.19583 17.5208 1 17.05 1 16.5V3.5H0V1.5H5V0.5H11V1.5H16V3.5H15V16.5C15 17.05 14.8042 17.5208 14.4125 17.9125C14.0208 18.3042 13.55 18.5 13 18.5H3ZM5 14.5H7V5.5H5V14.5ZM9 14.5H11V5.5H9V14.5Z"
                                            fill="#EF4444" />
                                    </svg>
    
                                </button>
                                <button type="button" (click)="cleanAchive()" *ngIf="lstArchivedRecords.length == 1 && showButtonClean">
                                    <span style="color: rgb(46, 167, 183); font-size: 18px;" nz-icon nzType="edit" nzTheme="outline"></span>
                                </button>
                            </div>
                        </div>
                        <div nz-row class="w-full" style="margin-bottom: 31px;">
                            <div nz-row *ngIf="isFixEmployeeButton == true">
                                <button (click)="addArchivedRecords()" type="button" class="button_add mx-2"><svg
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor" class="size-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                                    </svg>
                                </button>
                            </div>
                        </div>
    
                    </div>
    
    
                </div>


                <div nz-col class="children" >
                    <label class="label-form label_form">{{'employee.children_status' | translate}}</label>
                    <div nz-row style="border: 1px solid #d9d9d9; border-radius: 5px ;padding: 5px; margin-bottom: 20px;">
                        <div nz-row class="w-full mx-2" style="height: 32px !important; line-height: 32px;">
                            <div class="">
                                <nz-radio-group formControlName="hasChild">
                                    <label nz-radio nzValue="0">Chưa có con</label>
                                    <label nz-radio nzValue="1">Đã có con</label>
                                </nz-radio-group>
                            </div>
                        </div>
                        <div class="w-full" formArrayName="lstChildren"  [class.disabled-input]="has_child == '0' || form.get('hasChild')?.value == '0' " >
                            <div nz-row style="display: flex; flex-wrap: nowrap;" *ngFor="let child of lstChildren.controls; let childIndex = index" [formGroupName]="childIndex">
                                <div nz-col nzSpan="10">
                                    <div class="mx-2">
                                        <div class="">
                                            <label class="label-form"><span class="required-star">*</span>{{'employee.name_child' | translate}}</label>
                                            <div>
                                                <input  nz-input class="form-input" (input)="validateText(['lstChildren', childIndex, 'name'],$event)"  (blur)="onBlur(['lstChildren', childIndex, 'name'])"  formControlName="name" placeholder="Nhập"  style="width: 100%"  />
                                                    <div class="error-container">
                                                        <div *ngIf="child.get('name')?.touched && has_child == 1">
                                                            <span class="validate_input" *ngIf="child.get('name')?.errors?.['required']">{{'required.name_child' | translate}}</span>
                                                            <span class="instruct" *ngIf="child.get('name')?.errors?.['pattern']">{{'required.cannotBlank' | translate}}</span>

                                                        </div>
                                                    </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div nz-col nzSpan="6">
                                    <div class="mx-2">
                                        <div class="">
                                            <label class="label-form"><span class="required-star">*</span>{{'employee.yearOfBirth' | translate}}</label>
                                            <div>
                                                <input nz-input class="form-input" type="number" (input)="validateYearOfBirthChild(['child','yearOfBirth'],$event)" maxlength="4" formControlName="yearOfBirth" placeholder="Nhập năm" style="width: 100%"/>
                                                <div class="error-container">
                                                    <div *ngIf="(child.get('yearOfBirth')?.invalid && child.get('yearOfBirth')?.dirty || child.get('yearOfBirth')?.touched) && has_child == 1">
                                                        <span class="validate_input" *ngIf="child.get('yearOfBirth')?.errors?.['required']" >{{'required.cannotBlank' | translate}}</span>
                                                        <span class="instruct" *ngIf="child.get('yearOfBirth')?.errors?.['pattern']" >{{'required.number_pattern' | translate}}</span>
                                                        <span class="instruct" *ngIf="child.get('yearOfBirth')?.errors?.['min'] && !child.get('yearOfBirth')?.errors?.['pattern']"> {{('required.minYearEmployee' | translate) + minYearChild}}</span>
                                                        <span class="instruct" *ngIf="child.get('yearOfBirth')?.errors?.['max'] && !child.get('yearOfBirth')?.errors?.['pattern']"> {{('required.maxYearEmployee' | translate) + maxYearChild}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div nz-col nzSpan="6">
                                    <div class="mx-2">
                                        <div class="">
                                            <label class="label-form"><span class="required-star">*</span>{{'employee.gender' | translate}}</label>
                                            <nz-select nzPlaceHolder="Chọn" formControlName="gender"  style="width: 100%">
                                                <nz-option *ngFor="let gender of listGender" [nzValue]="gender.id" [nzLabel]="gender.value"></nz-option>
                                            </nz-select>
                                            <div class="error-container">
                                                <div *ngIf="child.get('gender')?.touched && has_child == '1'">
                                                    <span class="validate_input" *ngIf="child.get('gender')?.hasError('required')">{{'required.cannotBlank' | translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div nz-col *ngIf="(lstChildren.length > 1 || ( lstChildren.at(0).valid && has_child == '1'))  && isFixEmployeeButton == true"
                                    style="display: flex; justify-content: center; align-items: center; margin-left: 7px;">
                                    <a (click)="removelstChildren(childIndex)"  style=" border: none;">
                                        <svg width="16" height="19" viewBox="0 0 16 19" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M3 18.5C2.45 18.5 1.97917 18.3042 1.5875 17.9125C1.19583 17.5208 1 17.05 1 16.5V3.5H0V1.5H5V0.5H11V1.5H16V3.5H15V16.5C15 17.05 14.8042 17.5208 14.4125 17.9125C14.0208 18.3042 13.55 18.5 13 18.5H3ZM5 14.5H7V5.5H5V14.5ZM9 14.5H11V5.5H9V14.5Z"
                                                fill="#EF4444" />
                                        </svg>
    
                                    </a>
                                </div>
    
                            </div>
                        </div>
                        <div nz-row class="w-full"  [class.disabled-input]="has_child == '0' || form.get('hasChild')?.value == '0' " >
                            <div *ngIf="isFixEmployeeButton == true">
                                <button type="button" (click)="addlstChildren()" class="button_add mx-2"><svg
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor" class="size-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
    
                </div>
            </div>
        </div>
    
    </form>

    <div nzGutter="16" class="w-full" style="margin-top: 20px" *ngIf="isFixEmployeeButton == false">
        <span class="label_setup mx-2">{{'employee.AchiPunishPra' | translate}}</span>
    </div>

    <div class="p-4 pb-0" style="margin-top: 15px; background-color: #ffffff; border-radius: 8px" class="" *ngIf="isFixEmployeeButton == false">

        <div nz-row style="margin: 15px 18px 0px 18px; width: 100% !important">
            <div nz-col style="width: calc(40% - 16px); margin-bottom: 100px; ">
                <div nz-col class="w-full" style="padding: 8px 8px 8px 8px ;">
                <span style="font-size: 16px;color: #252C32; font-weight: 500; line-height: 18.75px;">{{'employee.praise' | translate}}</span>

                    <table class="custom-table">
                        <tbody class="css-table">
                            <tr>
                                <th style="text-align: center;" class="list-col-1">{{'table.time' | translate}}</th>
                                <th class="col-2">{{'table.employee.notePra' | translate}}</th>
                            </tr>
                            <tr *ngFor="let data of showEmpolyeeNoDataofLstPraises()">
                                <td class="col-1"  style="text-align: center;">{{(data.praiseDate | date: 'dd/MM/yyyy') || '-'}}</td>
                                <td class="col-1">{{data.description || '-'}}</td>
                            </tr>
                            
                        </tbody>
                    </table>
                </div>
                <div style="display: flex; justify-content: center; margin-top: 16px;">
                    <nz-pagination [(nzPageIndex)]="pagePr" [nzTotal]="totalPrai" [nzPageSize]="size"
                        (nzPageIndexChange)="onPageChangePraises($event)" class="custom-pagination">
                    </nz-pagination>
                </div>
            </div>
            <div nz-col style="width: calc(40% - 16px);">
                <div  nz-col class="w-full" style="padding:8px 8px 8px 8px ;">
                <span style="font-size: 16px;color: #252C32; font-weight: 500; line-height: 18.75px;">{{'employee.punishment' | translate}}</span>

                    <table class="custom-table">
                        <tbody class="css-table">
                            <tr>
                                <th style="text-align: center;" class="col-1">{{'table.time' | translate}}</th>
                                <th class="col-2">{{'table.employee.notePush' | translate}}</th>
                            </tr>
                            <tr *ngFor="let data of showEmpolyeeNoDataofLstPunishments()" >
                                <td class="col-1" style="text-align: center;">{{ (data.violationDate | date: 'dd/MM/yyyy')  || '-'}}</td>
                                <td class="col-1">{{data.note || '-'}}</td>

                            </tr>
                            
                        </tbody>
                    </table>
                </div>
                <div style="display: flex; justify-content: center; margin-top: 16px;">
                    <nz-pagination [(nzPageIndex)]="pagePu" [nzTotal]="totalPush" [nzPageSize]="size"
                        (nzPageIndexChange)="onPageChangePunishments($event)" class="custom-pagination">
                    </nz-pagination>
                </div>
            </div>
            <div nz-col style="width: calc(20% - 16px);">
                <div nz-col class="w-full" style="padding: 8px 0px 8px 8px ;">
                <span style="font-size: 16px;color: #252C32; font-weight: 500; line-height: 18.75px;">{{'table.employee.noteAchi' | translate}}</span>

                    <table class="custom-table">
                        <tbody class="css-table">
                            <tr>
                                <th style="text-align: center;" class="col-1">{{'table.time' | translate}}</th>
                                <th class="col-2">{{'table.employee.noteAchi' | translate}}</th>
                            </tr>
                            
                            <tr *ngFor="let data of showEmpolyeeNoDataofLstAchievements()" >
                                <td class="col-1" style="text-align: center !important; background-color: #ffffff !important;">{{data?.item || '-'}}</td>
                                <td class="col-2"style="text-align: center !important; background-color: #ffffff !important;">
                                    <a *ngIf="data" (click)="openModalAchievements(data?.item)" class="button_show_detail">
                                        {{'table.detailShow' | translate}}
                                    </a>
                                    <span *ngIf="!data">
                                        -
                                    </span>
                                </td>
                            </tr>
                            
                        </tbody>
                    </table>
                </div>
                <div style="display: flex; justify-content: center; margin-top: 16px;">
                    <nz-pagination [(nzPageIndex)]="pageAch" [nzTotal]="totalAchi" [nzPageSize]="size"
                        (nzPageIndexChange)="onPageChangeAchie($event)" class="custom-pagination">
                    </nz-pagination>
                </div>
            </div>
        </div>
    </div>
</div>


<nz-modal [(nzVisible)]="isModalInforEmployee" (nzOnCancel)="handleCancel()" (nzOnOk)="handleSubmit()"
    [nzContent]="modalContent" [nzFooter]="null" [nzStyle]="{'min-width' : '1200px','margin-top': '230px'}">
    <ng-template #modalContent>
        <div class="headmodal">
            <span style="font-weight: 500; font-size: 24px;">Xác nhận thôi việc</span>
        </div>
        <div nz-row>
            <div nz-col nzSpan="24">
                <div nz-col nzSpan="23" class="mx-4">
                    <table class="table-list-end-work">
                        <tbody>
                            <tr >
                                <th style="text-align: center;" class="list-col-1">ID</th>
                                <th class="list-col-3">Tên nhân viên</th>
                                <th style="text-align: center;" class="list-col-1">Năm sinh</th>
                                <th style="text-align: center;" class="list-col-2">SĐT</th>
                                <th style="text-align: center;" class="list-col-2">Trực thuộc quản lý</th>
                                <th style="text-align: center;" class="list-col-2">Chi nhánh</th>
                                <th style="text-align: center;" class="list-col-2">Bộ phận</th>
                            </tr>
                          
                            <tr *ngIf="showInforEmployee">
                                <td style="text-align: center;" class="list-col-1">{{showInforEmployee['code'] || '-'}}</td>
                                <td class="list-col-3">{{ showInforEmployee['name'] || '-' }}</td>
                                <td style="text-align: center;" class="list-col-1">{{ showInforEmployee['yearOfBirth'] || '-' }}</td>
                                <td style="text-align: center;" class="list-col-2">{{ showInforEmployee['phoneNumber']  || '-' }}</td>
                                <td style="text-align: center;" class="list-col-2">{{ showInforEmployee['officeName']  || '-' }}</td>
                                <td style="text-align: center;" class="list-col-2">{{ showInforEmployee['branchName']  || '-' }}</td>
                                <td style="text-align: center;" class="list-col-2">{{ showInforEmployee['departmentName']  || '-' }}</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div style="margin-top: 22px;">
        </div>
        <form [formGroup]="formEndWork">
            <div style="display: flex; justify-content: center;">
                <div style="display: flex; justify-content: center; width: 50%">
                    <div style=" width: calc(100% - 8px);">
                        <div class="form-control">
                            <label class="label-form"><span class="required-star">*</span> Từ ngày</label>
                            <div>
                                <nz-date-picker nzFormat="dd/MM/yyyy" style="width: 100%"
                                    (ngModelChange)="onDateChange('fromDate',$event)" class="w-full" formControlName="fromDate"
                                    nzPlaceHolder="Chọn ngày"></nz-date-picker> 
                                    <div *ngIf="formEndWork.get('fromDate')?.invalid && formEndWork.get('fromDate')?.dirty || formEndWork.get('fromDate')?.touched">
                                        <span class="validate_input"
                                            *ngIf="formEndWork.get('fromDate')?.errors?.['required']">Phải chọn ngày</span>
                                    </div>
                            </div>
                        </div>
                    </div>
                    <div style=" width: calc(100% - 8px);">
                        <div class="">
                            <span class="required-star" >*</span><label class="label-form" for="" >{{'employee.reason_submitEnd' | translate}}</label>
                            <input nz-input style="margin-top: 8px;" class="form-input" formControlName="reason" placeholder="Nhập..."  />
                            <div class="error-container">
                                <div *ngIf="formEndWork.get('reason')?.invalid && (formEndWork.get('reason')?.dirty || formEndWork.get('reason')?.touched)">
                                    <span class="validate_input" *ngIf="formEndWork.get('reason')?.errors?.['required']">{{'required.reason_submitEnd' | translate}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div style="margin-top: 42px;">
        </div>
        <div nz-row style="display: flex; justify-content: center;">
            <span>
                <button (click)="cancelEndWork()" type="button" class="button-infor" nz-button style="color: #274EA1; border-color: #274EA1;" nzType="default">Hủy</button>
            </span>
            <span class="ml-2">
                <button (click)="updateWorkStatus()" type="button" class="button-infor" style="background-color: #274EA1; color: white;" nz-button nzType="default"
                    >Lưu</button>
            </span>
        </div>
    </ng-template>
</nz-modal>


<nz-modal [(nzVisible)]="isModalAchievements" (nzOnCancel)="handleCancelAchive()" (nzOnOk)="handleSubmitAchive()"
    [nzContent]="modalContentAchi" [nzFooter]="null" [nzStyle]="{'min-width' : '1322px', 'min-height':'1080px'}">
    <ng-template #modalContentAchi>
        <div class="headmodal" style="margin-bottom: 32px;">
            <span style="font-weight: 500; font-size: 24px;">Thành tích {{newYear}}</span>
        </div>
        <div nz-row style="display: flex; justify-content: center;" >
            <div nz-col nzSpan="10">
                <div nz-row >
                    <div nz-col nzSpan="14">
                        <nz-select style="width: 100%" nzPlaceHolder="Chọn" [(ngModel)]="monthValue" (ngModelChange)="onChangeMonth($event)" >
                            <nz-option *ngFor="let data of optionMonth" [nzValue]="data.id" [nzLabel]="data.value | translate"></nz-option>
                        </nz-select>
                    </div>
                    <div nz-col nzSpan="2">

                    </div>
                    <div nz-col  nzSpan="8" style="padding: 12px 16px 12px 16px ; border-radius: 6px; border: 1px ;background-color: rgba(244, 247, 251, 1);">
                        <span >Kết quả: <span style="color: rgba(37, 44, 50, 1);"><strong>{{ resultStatus }}</strong></span></span>
                    </div>
                </div>
            </div>

        </div>
        <div nz-row class="w-full">
            <div nz-col nzSpan="24" class="flex">
                <div nz-col style="margin-top: 20px" class=" mx-4">
                    <table class="custom-table-day-list">
                        <tbody>
                            <tr style="background-color: #f4f7fb;">
                                <th style="text-align: center;" class="list-col-1">01</th>
                                <th style="text-align: center;" class="list-col-1">02</th>
                                <th style="text-align: center;" class="list-col-1">03</th>
                                <th style="text-align: center;" class="list-col-1">04</th>
                                <th style="text-align: center;" class="list-col-1">05</th>
                                <th style="text-align: center;" class="list-col-1">06</th>
                                <th style="text-align: center;" class="list-col-1">07</th>
                                <th style="text-align: center;" class="list-col-1">08</th>
                                <th style="text-align: center;" class="list-col-1">09</th>
                                <th style="text-align: center;" class="list-col-1">10</th>
                                <th style="text-align: center;" class="list-col-1">11</th>
                                <th style="text-align: center;" class="list-col-1">12</th>
                                <th style="text-align: center;" class="list-col-1">13</th>
                                <th style="text-align: center;" class="list-col-1">14</th>
                                <th style="text-align: center;" class="list-col-1">15</th>
                                <th style="text-align: center;" class="list-col-1">16</th>
                                <th style="text-align: center;" class="list-col-1">17</th>
                                <th style="text-align: center;" class="list-col-1">18</th>
                                <th style="text-align: center;" class="list-col-1">19</th>
                                <th style="text-align: center;" class="list-col-1">20</th>
                                <th style="text-align: center;" class="list-col-1">21</th>
                                <th style="text-align: center;" class="list-col-1">22</th>
                                <th style="text-align: center;" class="list-col-1">23</th>
                                <th style="text-align: center;" class="list-col-1">24</th>
                                <th style="text-align: center;" class="list-col-1">25</th>
                                <th style="text-align: center;" class="list-col-1">26</th>
                                <th style="text-align: center;" class="list-col-1">27</th>
                                <th style="text-align: center;" class="list-col-1">28</th>
                                <th style="text-align: center;" class="list-col-1">29</th>
                                <th style="text-align: center;" class="list-col-1">30</th>
                                <th style="text-align: center;" class="list-col-1">31</th>
                                <!-- <th *ngFor="let day of daysInMonth" style="text-align: center;" class="list-col-1">
                                    {{day}}
                                </th> -->
                            </tr >
                           
                            <tr style="background-color: #f4f7fb;">
                                <th  style="text-align: center;" class="list-col-1" *ngFor="let data of listArchiOfStaff, let i = index"> 
                                    <button type="button" (click)="changeDataOfTable(i)" style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;" >
                                        <span  *ngIf="data[1] === 1">
                                            <svg width="16" height="13" viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M5.59509 12.5L0 6.81185L1.39877 5.38981L5.59509 9.65592L14.6012 0.5L16 1.92204L5.59509 12.5Z" fill="#274EA1"/>
                                              </svg>
                                        </span>
                                        <span *ngIf="data[1] === 0">
                                            
                                        </span>
                                        
                                    </button>
                                </th>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div style="margin-top: 42px;">
        </div>
        <div nz-row>
            <div style="display: flex; justify-content: center; align-items: center;">
                <div nz-col nzSpan="4">

                </div>
            </div>
        </div>
        <div style="margin-top: 42px;">
        </div>

    </ng-template>
</nz-modal>
